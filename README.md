# Учебная сборка для изучения PostgreSQL
#### Содерждит в себе:
- [x] Docker-compose файл для запуска PostgreSQL
- [x] Мигратор для создания таблиц и заполнения их данными
- [x] SQL файлы с запросами для создания таблиц и заполнения их данными

В папке `database` находятся папки с со структурой той или иной базы данных,
принятая структура файлов/папок выглядит так:

```
├── ...
├── databases               # Содержит папки миграций для каждой базы данных
│   ├── {database_name}     # Папка миграций для базы данных, пример: studydb
│       ├── {schema_name}   # Папка миграций для схемы, пример: users
│           ├── tables    # Папка миграций для таблиц схемы 
│               ├── {table_name}.sql # Файл миграции для таблицы, пример: users.sql
│               ├── {table_name}.sql # Файл миграции для таблицы, пример: personal_data.sql
│           ├── views     # Папка миграций для представлений схемы
│           ├── fixtures  # Папка миграций для заполнения данными таблиц схемы
│           ├── functions # Папка миграций для функций схемы
│           ├── types     # Папка миграций для типов схемы
│           ├── sequences # Папка миграций для последовательностей схемы
│           ├── enums     # Папка миграций для перечислений схемы
│           ├── seeds     # Папка миграций для сидов схемы(заполнение данными таблиц схемы) отличие в том, что здесь как правило константы
│           ├── materialized_views  # Папка миграций для материализованных представлений схемы
│      ├── initialize-schema.sql # Файл миграции для создания схемы
└── ...
```

Один из основных файлов конфигурации мигратора это `config.yml`, в нем указываются имена миграций которые должны быть выполнены, 
прмиер можно посмотреть здесь `databases/studydb/config.yaml`.

#### Запуск:
1. Склонировать репозиторий
2. Убедиться что у вас установлен Docker и Docker-compose
3. Запустить контейнеры командой и мигратор `make init`
4. После запуска контейнеров, можно подключиться к базе данных с помощью любого клиента, например [DBeaver](https://dbeaver.io/)

#### Список доступных команд:
- `make init` - Запуск контейнеров и мигратора
- `make build` - Сборка мигратора
- `make migrate_up` - Запуск мигратора
- `make down` - Остановка контейнеров